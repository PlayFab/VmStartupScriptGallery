{"$schema":"https://dataexplorer.azure.com/static/d/schema/35/dashboard.json","id":"50c50702-639c-4bd2-ac80-ceb7101a0b3b","eTag":"XW2IC/vZZ8ylthyW3mzhUg==","schema_version":"35","title":"MPS-telegraf","autoRefresh":{"enabled":false},"sharedQueries":[],"tiles":[{"id":"2cfa9b0d-6cf1-4fab-878f-670041f4de49","title":"CPU Usage User","visualType":"timechart","pageId":"6aa3ff5c-449c-457d-a3ac-b1041c5683cf","layout":{"x":0,"y":0,"width":9,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"14428810-bd9a-45ac-a936-a999abb57196"},"usedVariables":["_buildID","_endTime","_region","_startTime","_vmID"],"text":"let binDuration=iff(_endTime - _startTime >= 7d, 1d, iff(_endTime - _startTime >= 4d, 4h, iff(_endTime - _startTime >= 1d, 1h, 5m)));\ntelegraf_cpu \n| where timestamp  between (['_startTime'] .. ['_endTime']) // Time range filtering\n| evaluate bag_unpack(tags)\n| evaluate bag_unpack(fields)\n| where isempty(['_buildID']) or buildID in (['_buildID'])\n| where isempty(['_vmID']) or vmID in (['_vmID'])\n| where isempty(['_region']) or region in (['_region'])\n| summarize Cpu=10*avg(usage_user) by bin(timestamp, binDuration), buildID, vmID\n"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Cpu"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"466386b8-62cf-4289-b936-262a76ccd2d2","title":"Available Memory [%]","visualType":"timechart","pageId":"3ea853dd-ad91-422a-93ae-07d3091c2d44","layout":{"x":0,"y":0,"width":9,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"14428810-bd9a-45ac-a936-a999abb57196"},"usedVariables":["_buildID","_endTime","_region","_startTime","_vmID"],"text":"let binDuration=iff(_endTime - _startTime >= 7d, 1d, iff(_endTime - _startTime >= 4d, 4h, iff(_endTime - _startTime >= 1d, 1h, 5m)));\ntelegraf_mem \n| where timestamp  between (['_startTime'] .. ['_endTime']) // Time range filtering\n| evaluate bag_unpack(tags)\n| evaluate bag_unpack(fields)\n| where isempty(['_buildID']) or buildID in (['_buildID'])\n| where isempty(['_vmID']) or vmID in (['_vmID'])\n| where isempty(['_region']) or region in (['_region'])\n| summarize AvailableMemory=avg(available_percent) by bin(timestamp, binDuration), buildID, region\n"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["AvailableMemory"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"a5a421d2-0dbb-40df-ba97-2786140080ec","title":"CPU Usage System","visualType":"timechart","pageId":"6aa3ff5c-449c-457d-a3ac-b1041c5683cf","layout":{"x":9,"y":0,"width":9,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"14428810-bd9a-45ac-a936-a999abb57196"},"usedVariables":["_buildID","_endTime","_region","_startTime","_vmID"],"text":"let binDuration=iff(_endTime - _startTime >= 7d, 1d, iff(_endTime - _startTime >= 4d, 4h, iff(_endTime - _startTime >= 1d, 1h, 5m)));\ntelegraf_cpu \n| where timestamp  between (['_startTime'] .. ['_endTime']) // Time range filtering\n| evaluate bag_unpack(tags)\n| evaluate bag_unpack(fields)\n| where isempty(['_buildID']) or buildID in (['_buildID'])\n| where isempty(['_vmID']) or vmID in (['_vmID'])\n| where isempty(['_region']) or region in (['_region'])\n| summarize Cpu=10*avg(todouble(usage_system)) by bin(timestamp, binDuration), buildID, vmID\n"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Cpu"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"7bfc36aa-1ca5-49e5-8cf1-2397a99b3656","title":"Available Memory [%]","visualType":"timechart","pageId":"6aa3ff5c-449c-457d-a3ac-b1041c5683cf","layout":{"x":0,"y":7,"width":9,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"14428810-bd9a-45ac-a936-a999abb57196"},"usedVariables":["_buildID","_endTime","_region","_startTime","_vmID"],"text":"let binDuration=iff(_endTime - _startTime >= 7d, 1d, iff(_endTime - _startTime >= 4d, 4h, iff(_endTime - _startTime >= 1d, 1h, 5m)));\ntelegraf_mem \n| where timestamp  between (['_startTime'] .. ['_endTime']) // Time range filtering\n| evaluate bag_unpack(tags)\n| evaluate bag_unpack(fields)\n| where isempty(['_buildID']) or buildID in (['_buildID'])\n| where isempty(['_vmID']) or vmID in (['_vmID'])\n| where isempty(['_region']) or region in (['_region'])\n| summarize AvailableMemory=avg(available_percent) by bin(timestamp, binDuration), buildID, vmID\n"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["AvailableMemory"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"3b54b546-24fa-49fa-85c4-3b7729c21d30","title":"Disk used %","visualType":"timechart","pageId":"6aa3ff5c-449c-457d-a3ac-b1041c5683cf","layout":{"x":0,"y":14,"width":9,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"14428810-bd9a-45ac-a936-a999abb57196"},"usedVariables":["_buildID","_endTime","_region","_startTime","_vmID"],"text":"let binDuration=iff(_endTime - _startTime >= 7d, 1d, iff(_endTime - _startTime >= 4d, 4h, iff(_endTime - _startTime >= 1d, 1h, 5m)));\ntelegraf_disk \n| where timestamp  between (['_startTime'] .. ['_endTime']) // Time range filtering\n| evaluate bag_unpack(tags)\n| evaluate bag_unpack(fields)\n| where isempty(['_buildID']) or buildID in (['_buildID'])\n| where isempty(['_vmID']) or vmID in (['_vmID'])\n| where isempty(['_region']) or region in (['_region'])\n| summarize Cpu=avg(used_percent) by bin(timestamp, binDuration), buildID, vmID\n"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Cpu"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"5cce3c3f-81da-4781-995e-50df36e5d0c1","title":"Disk reads","visualType":"timechart","pageId":"6aa3ff5c-449c-457d-a3ac-b1041c5683cf","layout":{"x":9,"y":14,"width":9,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"14428810-bd9a-45ac-a936-a999abb57196"},"usedVariables":["_buildID","_endTime","_region","_startTime","_vmID"],"text":"let binDuration=iff(_endTime - _startTime >= 7d, 1d, iff(_endTime - _startTime >= 4d, 4h, iff(_endTime - _startTime >= 1d, 1h, 5m)));\ntelegraf_diskio \n| where timestamp  between (['_startTime'] .. ['_endTime']) // Time range filtering\n| evaluate bag_unpack(fields)\n| evaluate bag_unpack(tags, columnsConflict='keep_source')\n| where isempty(['_buildID']) or buildID in (['_buildID'])\n| where isempty(['_vmID']) or vmID in (['_vmID'])\n| where isempty(['_region']) or region in (['_region'])\n| summarize Cpu=avg(todouble(reads)) by bin(timestamp, binDuration), buildID, vmID\n"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Cpu"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"b200b3d7-0d09-4849-abd2-addf53ce72de","title":"Disk writes","visualType":"timechart","pageId":"6aa3ff5c-449c-457d-a3ac-b1041c5683cf","layout":{"x":9,"y":7,"width":9,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"14428810-bd9a-45ac-a936-a999abb57196"},"usedVariables":["_buildID","_endTime","_region","_startTime","_vmID"],"text":"let binDuration=iff(_endTime - _startTime >= 7d, 1d, iff(_endTime - _startTime >= 4d, 4h, iff(_endTime - _startTime >= 1d, 1h, 5m)));\ntelegraf_diskio \n| where timestamp  between (['_startTime'] .. ['_endTime']) // Time range filtering\n| evaluate bag_unpack(tags, columnsConflict='keep_source')\n| evaluate bag_unpack(fields)\n| where isempty(['_buildID']) or buildID in (['_buildID'])\n| where isempty(['_vmID']) or vmID in (['_vmID'])\n| where isempty(['_region']) or region in (['_region'])\n| summarize Cpu=avg(todouble(writes)) by bin(timestamp, binDuration), buildID, vmID\n"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Cpu"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"8f614f5d-28da-429f-89af-7f72faf25470","title":"Network bytes recv","visualType":"timechart","pageId":"6aa3ff5c-449c-457d-a3ac-b1041c5683cf","layout":{"x":0,"y":21,"width":9,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"14428810-bd9a-45ac-a936-a999abb57196"},"usedVariables":["_buildID","_endTime","_region","_startTime","_vmID"],"text":"let binDuration=iff(_endTime - _startTime >= 7d, 1d, iff(_endTime - _startTime >= 4d, 4h, iff(_endTime - _startTime >= 1d, 1h, 5m)));\ntelegraf_net \n| where timestamp  between (['_startTime'] .. ['_endTime']) // Time range filtering\n| evaluate bag_unpack(fields)\n| evaluate bag_unpack(tags, columnsConflict='keep_source')\n| where isempty(['_buildID']) or buildID in (['_buildID'])\n| where isempty(['_vmID']) or vmID in (['_vmID'])\n| where isempty(['_region']) or region in (['_region'])\n| summarize Cpu=avg(todouble(bytes_recv)) by bin(timestamp, binDuration), buildID, vmID\n"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Cpu"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"805bfec2-4a21-4c38-88ef-bba69c573370","title":"Network bytes sent","visualType":"timechart","pageId":"6aa3ff5c-449c-457d-a3ac-b1041c5683cf","layout":{"x":9,"y":21,"width":9,"height":7},"query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"14428810-bd9a-45ac-a936-a999abb57196"},"usedVariables":["_buildID","_endTime","_region","_startTime","_vmID"],"text":"let binDuration=iff(_endTime - _startTime >= 7d, 1d, iff(_endTime - _startTime >= 4d, 4h, iff(_endTime - _startTime >= 1d, 1h, 5m)));\ntelegraf_net \n| where timestamp  between (['_startTime'] .. ['_endTime']) // Time range filtering\n| evaluate bag_unpack(fields)\n| evaluate bag_unpack(tags, columnsConflict='keep_source')\n| where isempty(['_buildID']) or buildID in (['_buildID'])\n| where isempty(['_vmID']) or vmID in (['_vmID'])\n| where isempty(['_region']) or region in (['_region'])\n| summarize Cpu=avg(todouble(bytes_sent)) by bin(timestamp, binDuration), buildID, vmID\n"},"visualOptions":{"hideTileTitle":false,"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"xColumnTitle":"","xColumn":{"type":"infer"},"yColumns":{"type":"specified","value":["Cpu"]},"seriesColumns":{"type":"infer"},"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}}],"parameters":[{"kind":"duration","id":"d7529ec2-357c-4712-93f9-5eb9ae483a34","displayName":"Time range","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"all"}},{"kind":"string","id":"0884c010-74aa-4d91-bb49-f3193a594ed7","displayName":"BuildID","variableName":"_buildID","selectionType":"array","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"14428810-bd9a-45ac-a936-a999abb57196"},"usedVariables":["_endTime","_startTime"],"text":"let binDuration=iff(_endTime - _startTime >= 7d, 1d, iff(_endTime - _startTime >= 4d, 4h, iff(_endTime - _startTime >= 1d, 1h, 5m)));\ntelegraf_cpu \n| where timestamp  between (['_startTime'] .. ['_endTime']) // Time range filtering\n| evaluate bag_unpack(tags)\n| project buildID\n| distinct buildID"},"columns":{"value":"buildID"}},"showOnPages":{"kind":"all"}},{"kind":"string","id":"a711c0e6-ce73-499d-9c34-2766585f1b8b","displayName":"VmID","variableName":"_vmID","selectionType":"array","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"14428810-bd9a-45ac-a936-a999abb57196"},"usedVariables":["_endTime","_startTime"],"text":"let binDuration=iff(_endTime - _startTime >= 7d, 1d, iff(_endTime - _startTime >= 4d, 4h, iff(_endTime - _startTime >= 1d, 1h, 5m)));\ntelegraf_cpu \n| where timestamp  between (['_startTime'] .. ['_endTime']) // Time range filtering\n| evaluate bag_unpack(tags)\n| project vmID\n| distinct vmID"},"columns":{"value":"vmID"}},"showOnPages":{"kind":"all"}},{"kind":"string","id":"fb86c734-7378-4644-aeb2-302ed897994d","displayName":"Region","variableName":"_region","selectionType":"array","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","query":{"kind":"inline","dataSource":{"kind":"inline","dataSourceId":"14428810-bd9a-45ac-a936-a999abb57196"},"usedVariables":["_endTime","_startTime"],"text":"let binDuration=iff(_endTime - _startTime >= 7d, 1d, iff(_endTime - _startTime >= 4d, 4h, iff(_endTime - _startTime >= 1d, 1h, 5m)));\ntelegraf_cpu \n| where timestamp  between (['_startTime'] .. ['_endTime']) // Time range filtering\n| evaluate bag_unpack(tags)\n| project region\n| distinct region"},"columns":{"value":"region"}},"showOnPages":{"kind":"all"}}],"dataSources":[{"id":"14428810-bd9a-45ac-a936-a999abb57196","name":"TelegrafDatasource","clusterUri":"https://<name>.<region>.kusto.windows.net/","database":"MyDatabase","queryResultsCacheMaxAge":30000,"kind":"manual-kusto","scopeId":"kusto"}],"pages":[{"name":"Metrics per VM","id":"6aa3ff5c-449c-457d-a3ac-b1041c5683cf"},{"name":"Metrics per Build Region","id":"3ea853dd-ad91-422a-93ae-07d3091c2d44"}]}